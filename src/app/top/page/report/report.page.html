<ng-container *ngIf="show">
  <ion-header>
    <ion-toolbar>
      <ion-menu-button slot="start"></ion-menu-button>
      <ion-title>{{report.shop_na}}　{{report.cast_na}}　の体験レポート</ion-title>
      <ion-buttons slot="end">
        <ion-button *ngIf="count>1" routerLink="/tabs/tab1" [queryParams]="{cast:report.cast}" slot="end" fill="clear">
          <ion-icon name="document" slot="icon-only" color="primary"></ion-icon>{{count}}
        </ion-button>
        <ion-button [routerLink]="'/post/report/'+report.id" slot="end" fill="clear">
          <ion-icon name="create" slot="icon-only"></ion-icon>
        </ion-button>
        <ion-menu-button menu="end">
          <ion-icon name="contacts"></ion-icon>
        </ion-menu-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  <ion-content #content (ionScrollEnd)="onScrollEnd()">
    <ion-grid #basic>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="5" size-lg="5" size-xl="5">
          <a [href]="report.casturl" target="_blank"><img [src]="report.cast_img" class="castImg" /></a>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="7" size-lg="7" size-xl="7">
          <div style="text-align: center;">
            <a [href]="report.shopurl" target="_blank"><img [src]="report.shop_img" class="shopImg" /></a>
          </div>
          <ion-icon name="call"></ion-icon><a [href]="report.shopurl" target="_blank">{{report.phone}}</a>
          <ion-item>
            {{report.played|date:'day'}} {{report.time}}分 {{report.price}}円
          </ion-item>
          <ion-item *ngIf="report.user$|async as user">
            <div>
              <div class="user">
                <ion-item button="true" (click)="popUser(report.user)" lines="none">
                  <ion-avatar><img [src]="user.avatar"></ion-avatar>
                </ion-item>
                <ion-item button="true" [routerLink]="'/user/' + report.user" lines="none">{{user.na}}</ion-item>
              </div>
              <div>
                <span>
                  <ion-icon name="document" color="primary"></ion-icon>{{user.report}}
                </span>
                <ion-icon name="paper" color="primary"></ion-icon>{{user.column}}
                <ion-icon name="eye" color="secondary"></ion-icon>{{user.view}}
                <ion-icon name="heart" color="danger"></ion-icon>{{user.faner}}
                <ion-icon name="star" color="warning"></ion-icon>{{user.follower}}
                <ion-icon name="thumbs-up" color="success"></ion-icon>{{user.good}}
                <span>
                  <ion-icon name="thumbs-down" color="dark"></ion-icon>{{user.bad}}
                </span>
              </div>
            </div>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12">
          <ion-item>
            ルックス:{{report.looks}}点　スタイル:{{report.style}}点　サービス:{{report.hosp}}点　
            <ion-text slot="end">総合:{{report.total}}点</ion-text>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid #essay>
      <ion-row *ngFor="let story of storys;index as i;">
        <ng-container *ngIf="!story.rested;else rest">
          <ion-col *ngIf="story.media" size-xs="12" size-sm="12" size-md="12" size-lg="12" size-xl="6"
            [innerHtml]="story.media | safe">
          </ion-col>
          <ion-col *ngIf="story.txt && story.media" size-xs="12" size-sm="12" size-md="12" size-lg="12" size-xl="6"
            [innerHtml]="story.txt | safe">
          </ion-col>
          <ion-col *ngIf="story.txt && !story.media" size-xs="12" size-sm="12" size-md="12" size-lg="12" size-xl="12"
            [innerHtml]="story.txt | safe">
          </ion-col>
        </ng-container>
        <ng-template #rest>
          <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="12" size-xl="12">
            <ion-item>
              <ion-text color="tertiary">続きはあと{{story.rested|date:'last'}}で公開されます</ion-text>
              <ion-button slot="end" [routerLink]="'/support/'+report.user" color="tertiary">
                <ion-icon name="heart" color="danger"></ion-icon>サポートして今すぐ見る
              </ion-button>
            </ion-item>
          </ion-col>
        </ng-template>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="12" size-xl="12">
          <ion-item>
            <span *ngIf="report.age">年齢：{{report.age}}歳　</span>
            <span *ngIf="report.height">身長：{{report.height}}cm　</span>
            <span *ngIf="report.weight">体重：{{report.weight}}kg　</span>
            <span *ngIf="report.skin">肌色：{{skinVals[report.skin]}}　</span>
            <span *ngIf="report.tits">おっぱい：{{titsVals[report.tits]}}cup　</span>
            <span *ngIf="report.tabacco">喫煙：{{tabaccoVals[report.tabacco]}}　</span>
            <span *ngIf="report.tattoo">刺青：{{tattooVals[report.tattoo]}}　</span>
            <span *ngIf="report.commu">言語：{{commuVals[report.commu]}}</span>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid #media>
      <ion-row *ngIf="video">
        <ion-col size="12">
          <video [src]="video.url" controls="true"></video>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="1" align-self-center>
          <ion-button fill="clear" (click)="slides.slidePrev(500)">
            <ion-icon name="arrow-dropleft-circle" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="10">
          <ion-slides #slides pager="true" [options]="slideOpts">
            <ion-slide *ngFor="let img of imgs">
              <img class="sildeImg" [src]="img.url" />
            </ion-slide>
          </ion-slides>
        </ion-col>
        <ion-col size="1" align-self-center>
          <ion-button fill="clear" (click)="slides.slideNext(500)">
            <ion-icon name="arrow-dropright-circle" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
    <app-chat #chat page="report" [params]="params" [user]="user" [content]="content">
    </app-chat>
    <ion-fab vertical="top" horizontal="end" slot="fixed">
      <ion-fab-button *ngIf="currentY>50" (click)="scroll(0)" color="light" size="small">
        <ion-icon name="arrow-dropup"></ion-icon>
      </ion-fab-button>
      <ion-fab-button *ngIf="currentY>essayY+50" (click)="scroll(essayY)" color="light" size="small">
        Essay
      </ion-fab-button>
      <ion-fab-button *ngIf="currentY>mediaY+50" (click)="scroll(mediaY)" color="light" size="small">
        Media
      </ion-fab-button>
      <ion-fab-button *ngIf="currentY>chatY+50" (click)="scroll(chatY)" color="light" size="small">
        Chat
      </ion-fab-button>
    </ion-fab>
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button *ngIf="currentY+contentH<essayY" (click)="scroll(essayY)" color="light" size="small">
        Essay
      </ion-fab-button>
      <ion-fab-button *ngIf="currentY+contentH<mediaY" (click)="scroll(mediaY)" color="light" size="small">
        Media
      </ion-fab-button>
      <ion-fab-button *ngIf="currentY+contentH<chatY" (click)="scroll(chatY)" color="light" size="small">
        Chat
      </ion-fab-button>
      <ion-fab-button *ngIf="currentY+contentH<scrollH-50" (click)="scroll(scrollH)" color="light" size="small">
        <ion-icon name="arrow-dropdown"></ion-icon>
      </ion-fab-button>
      <ng-container *ngIf="currentY+contentH===scrollH && !eval">
        <ion-fab-button (click)="evaluation('good')" size="small">
          <ion-icon name="thumbs-up" color="success"></ion-icon>
        </ion-fab-button>
        <ion-fab-button (click)="evaluation('bad')" size="small" color="danger">
          <ion-icon name="thumbs-down" color="dark"></ion-icon>
        </ion-fab-button>
      </ng-container>
    </ion-fab>
  </ion-content>
  <ion-footer id="footer">
    <app-send *ngIf="user.id&&currentY+contentH>chatY&&report.ack==1" [id]="report.id.toString()" page="report"
      thread="" [user]="user" [content]="content">
    </app-send>
  </ion-footer>
</ng-container>

<!--



-->